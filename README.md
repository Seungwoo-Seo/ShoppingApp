# NETPING

> ë„¤ì´ë²„ ì‡¼í•‘ APIë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  ì‡¼í•‘ ì•±ì…ë‹ˆë‹¤.
  
<p align="center">
  <img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/db4aefe5-30f4-4446-a98e-42c38261a164" width="130">
  <img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/98f10dba-cb3c-4c91-8754-e60e85691e63" width="130">
  <img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/f76f6dbd-843c-444c-b299-7f3e7cc9dc1e" width="130">
  <img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/4d2000e7-1973-4ef2-991c-8a848e92abe1" width="130">
  <img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/4a120d90-ca6f-46ff-840b-7a4aeecba901" width="130">
  <img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/fb21d33c-9ba7-4b4f-b447-3d8d311e81aa" width="130">
</p>

|í™ˆ|ê²€ìƒ‰|á„á…µá†·|ìµœê·¼ ë³¸ ìƒí’ˆ|ì†Œì…œ ë¡œê·¸ì¸|
|:---:|:---:|:---:|:---:|:---:|
|<img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/f6dd7d9d-04d6-4cb1-966e-75f83a5f10a2" width="150">|<img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/c1a2cd45-297b-4a33-b5c7-2a5c500bede0" width="150">|<img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/63584591-40da-4c71-bc91-aba6abccf07e" width="150">|<img src="https://github.com/Seungwoo-Seo/ExemplaryRestaurantIB/assets/72753868/17f8f139-ebc0-419b-accf-1bc09975b2f5" width="150">|<img src="https://github.com/Seungwoo-Seo/ShoppingApp/assets/72753868/7e553976-f1b5-49ee-b005-f4921e6dcb3d" width="150">|

## ğŸ“± ì„œë¹„ìŠ¤

- ìµœì†Œ ë²„ì „ : iOS 15.0
- ê°œë°œ ì¸ì› : 1ì¸
- ê°œë°œ ê¸°ê°„ : 2023.05.12 ~ 2023.06.21 (6ì£¼)

## ğŸš€ ì„œë¹„ìŠ¤ ê¸°ëŠ¥

- ì´ë©”ì¼ íšŒì›ì¸ì¦ê³¼ êµ¬ê¸€, ì• í”Œ ì†Œì…œë¡œê·¸ì¸ ê¸°ëŠ¥ ì œê³µ
- ë„¤ì´ë²„ ì‡¼í•‘ API ê¸°ë°˜ ì£¼ì œ/ìŠ¤íƒ€ì¼ ì¶”ì²œ/ì¹´í…Œê³ ë¦¬ ìƒí’ˆ ì •ë³´ ì œê³µ
- ê²€ìƒ‰/ìµœê·¼ ê²€ìƒ‰ì–´/ì°œ/ìµœê·¼ ë³¸ ìƒí’ˆ ê¸°ëŠ¥ ì œê³µ

## ğŸ›  ì‚¬ìš© ê¸°ìˆ 

- Swift
- Foundation, UIKit, WebKit, CryptoKit, Authentication Services
- MVP, Singleton, Delegate Pattern
- Alamofire, SnapKit, Kingfisher, Tabman, TTGTagCollectionView, Toast
- CodeBase UI, AutoLayout, CompositionalLayout, DiffableDataSource, UserDefaults, Codable, 
- Firebase RealtimeDatabase, Firebase FireStore, Firebase Auth, Unit Test

## ğŸ’» í•µì‹¬ ì„¤ëª…

- Firebase Auth, Firebase FireStoreë¥¼ í™œìš©í•´ OAuth 2.0 ê¸°ë°˜ `ì´ë©”ì¼ íšŒì›ì¸ì¦/ì†Œì…œ ë¡œê·¸ì¸(êµ¬ê¸€, ì• í”Œ)` êµ¬í˜„
- ì• í”Œ ë¡œê·¸ì¸ êµ¬í˜„ ì‹œ, Firebase ë¬´ê²°ì„± ê²€ì‚¬ë¥¼ ìœ„í•´ CryptoKit ê¸°ë°˜ `nonce ìƒì„± ë¡œì§` ì¶”ê°€
- Alamofireë¥¼ ì‚¬ìš©í•œ `REST API í†µì‹ ` êµ¬í˜„
- offset ê¸°ë°˜ `í˜ì´ì§€ ë„¤ì´ì…˜`ì„ í†µí•´ ìƒí’ˆ ì •ë³´ í‘œí˜„
- UserDefaultsë¥¼ í™œìš©í•´ `ìµœê·¼ ê²€ìƒ‰ì–´ CRUD` êµ¬í˜„, Firebase RealtimeDatabaseë¥¼ í™œìš©í•´ `ì°œ/ìµœê·¼ ë³¸ ìƒí’ˆ CRUD` êµ¬í˜„
- CompositionalLayoutì„ í™œìš©í•´ `ê·¸ë¦¬ë“œ, ë¦¬ìŠ¤íŠ¸` ë ˆì´ì•„ì›ƒ êµ¬í˜„
- DiffableDataSource + Notificationì„ í†µí•œ `Expandable Section` êµ¬í˜„
- BDD ê¸°ë°˜ì˜ `Unit Test` êµ¬í˜„

## ğŸš§ ê¸°ìˆ ì  ë„ì „

<!-- í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ê²ªì€ ê¸°ìˆ ì ì¸ ë„ì „ê³¼ ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ì— ëŒ€í•œ ì„¤ëª…ì„ ì¶”ê°€í•œë‹¤. -->
### 1. CompositionalLayout
- **ë„ì „ ìƒí™©**</br>
ë³µì¡í•œ í™”ë©´ì„ êµ¬í˜„í•  ë•Œ, UITableView + UICollectionView êµ¬ì¡°ë¡œ êµ¬í˜„í•˜ë©´ ì½”ë“œë„ ë³µì¡í•´ì§€ê³  í•¸ë“¤ë§í•˜ëŠ”ë° ë§ì€ ë¦¬ì†ŒìŠ¤ê°€ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— `CompositionalLayout`ì„ ë„ì…

- **ë„ì „ ê²°ê³¼**</br>
ë‹¨ì¼ collectionViewë§Œìœ¼ë¡œ ë³µì¡í•œ ë ˆì´ì•„ì›ƒì„ ì§ê´€ì ìœ¼ë¡œ êµ¬í˜„. ê°ê°ì˜ ë ˆì´ì•„ì›ƒ ìš”ì†Œë“¤ì„ ëª¨ë“ˆí™” í•  ìˆ˜ ìˆì—ˆê¸°ì— ë ˆì´ì•„ì›ƒì´ ë³µì¡í•´ì§€ë”ë¼ë„ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„± í–¥ìƒ
~~~swift
/// HomeViewControllerì— collectionViewì˜  layout
enum HomeCollectionViewLayout {
    case `default`

    /// layout ìƒì„±
    var createLayout: UICollectionViewLayout {
        let layout = UICollectionViewCompositionalLayout { sectionIndex, layoutEnvironment -> NSCollectionLayoutSection? in

            let section = HomeCollectionViewSectionKind(
                rawValue: sectionIndex
            )

            switch section {
            case .ë©”ì¸ë°°ë„ˆ:
                return self.createMainBannerSection()
            case .ì¹´í…Œê³ ë¦¬:
                return self.createCategorySection()
            case .ì˜¤ëŠ˜ì˜ë­í‚¹:
                return self.createRankSection()
            case .ì˜¤ëŠ˜êµ¬ë§¤í•´ì•¼í• ì œí’ˆ:
                return self.createTwoColumGridSection()
            case .ì´ì£¼ì˜ë¸Œëœë“œì´ìŠˆ:
                return self.createBrandOfTheWeekSection()
            case .ì§€ê¸ˆëˆˆì—ë„ëŠ”í›„ë“œí‹°:
                return self.createTwoColumGridSection()
            case .ì„œë¸Œë°°ë„ˆ:
                return self.createSubBannerSection()
            case .ì¼ì´ˆë§Œì—ì‚¬ë¡œì¡ëŠ”ë‚˜ì˜ì·¨í–¥:
                return self.createTwoColumGridSection()
            case .none:
                fatalError(
                    "ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•  ìˆ˜ ì—†ëŠ” ì„¹ì…˜ì…ë‹ˆë‹¤."
                )
            }
        }

        return layout
    }
}
~~~
~~~swift
// Section
private extension HomeCollectionViewLayout {

    /// ë©”ì¸ë°°ë„ˆ ì„¹ì…˜ layout.
    /// í•˜ë‚˜ì˜ ì—´ì— ì—¬ëŸ¬ ì»¬ëŸ¼ì„ ê°€ì§„ í˜•íƒœ
    func createMainBannerSection() -> NSCollectionLayoutSection {
        let itemSize = NSCollectionLayoutSize(
            widthDimension: .fractionalWidth(1.0),
            heightDimension: .fractionalHeight(1.0)
        )

        let item = NSCollectionLayoutItem(
            layoutSize: itemSize
        )

        let groupSize = NSCollectionLayoutSize(
            widthDimension: .fractionalWidth(1.0),
            heightDimension: .fractionalHeight(0.65)
        )

        let group = NSCollectionLayoutGroup.horizontal(
            layoutSize: groupSize,
            subitems: [item]
        )

        let section = NSCollectionLayoutSection(group: group)
        section.orthogonalScrollingBehavior = .groupPagingCentered

        return section
    }

    ...
}
~~~

### 2. DiffableDataSourceë¥¼ í™œìš©í•´ Expandable Cell êµ¬í˜„

- **ë„ì „ ìƒí™©**</br>
`Expandable Cell`ì„ êµ¬í˜„í•˜ê¸°

- **ë„ì „ ê²°ê³¼**</br>
<img src="https://github.com/Seungwoo-Seo/ShoppingApp/assets/72753868/1d8a747d-a42e-44fd-92c0-8378673b7619" width="130"></br>
`DiffableDataSource`ì™€ `Notification`ì„ í™œìš©í•˜ì—¬ êµ¬í˜„

~~~swift
func didTapOutLineButton(_ sender: UIButton) {
    // ë²„íŠ¼ì˜ tagê°’ìœ¼ë¡œ í˜„ì¬ ì„¹ì…˜ì„ ì°¾ê³ 
    guard let section = dataSource.sectionIdentifier(for: sender.tag) else {return}

    // ì „ì²´ ìŠ¤ëƒ¡ì‚¿ì´ ì•„ë‹Œ ì„¹ì…˜ ìŠ¤ëƒ…ìƒ· ìƒì„±
    var sectionSnapshot = NSDiffableDataSourceSectionSnapshot<CategoryItem>()

    // ë²„íŠ¼ì´ ì„ íƒë˜ì–´ ìˆë‹¤ë©´
    if sender.isSelected {
        // 1. ê¸°ì¡´ ìŠ¤ëƒ…ìƒ·ì„ ì§€ìš´ë‹¤.
        sectionSnapshot.deleteAll()

        var snapshot = NSDiffableDataSourceSnapshot<CategoryCollectionViewSectionKind, CategoryItem>()
        snapshot.appendSections(CategoryCollectionViewSectionKind.allCases)

        // 2. itemì„ ì œì™¸í•˜ê³  sectionë“¤ë§Œ ì¶”ê°€í•´ì„œ ìŠ¤ëƒ…ìƒ·ì„ ì ìš©í•œë‹¤.
        dataSource.apply(sectionSnapshot, to: section, animatingDifferences: false)
    }

    // ë²„íŠ¼ì´ ì„ íƒë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´
    else {
        // 1. ê¸°ì¡´ì— ì„ íƒë˜ì–´ ìˆëŠ” ì„¹ì…˜ì˜ ìŠ¤ëƒ…ìƒ·ì„ ì§€ìš´ë‹¤.
        NotificationCenter.default.post(
            name: Notification.Name.likeRadioButton,
            object: sender.tag,
            userInfo: nil
        )

        // 2. sectionë“¤ì„ ì¶”ê°€í•˜ê³ 
        var snapshot = NSDiffableDataSourceSnapshot<CategoryCollectionViewSectionKind, CategoryItem>()
        snapshot.appendSections(CategoryCollectionViewSectionKind.allCases)
        dataSource.apply(snapshot, animatingDifferences: false)

        let items = section.categorys

        // 3. í•´ë‹¹ ì„¹ì…˜ì— ì•„ì´í…œì„ ì¶”ê°€í•œë‹¤.
        sectionSnapshot.append(items)

        // 4. ìŠ¤ëƒ…ìƒ· ì ìš©
        dataSource.apply(sectionSnapshot, to: section, animatingDifferences: true)
    }

    sender.toggle()
}
~~~

## ğŸš¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

<!-- í”„ë¡œì íŠ¸ ì¤‘ ë°œìƒí•œ ë¬¸ì œì™€ ê·¸ í•´ê²° ë°©ë²•ì— ëŒ€í•œ ë‚´ìš©ì„ ê¸°ë¡í•œë‹¤. -->
### 1. ImageViewì— cornerRadiusì™€ shadow ë™ì‹œ ì„¤ì • ë¶ˆê°€ ì´ìŠˆ
- **ë¬¸ì œ ì›ì¸**</br>
shadowëŠ” ë·°ì˜ layer ì™¸ë¶€ì— ê·¸ë ¤ì§€ëŠ”ë° clipsToBoundsë¥¼ trueë¡œ ì„¤ì •í•˜ì—¬ layer ì™¸ë¶€ì˜ ëª¨ë“  í•­ëª© ì œê±°í•œ ìƒí™©ì´ ì›ì¸

- **í•´ê²° ë°©ë²•**</br>
shadowë§Œ ì ìš©í•œ ë¹ˆ ë·°ë¥¼ ë‘ê³  ë°”ë¡œ ìœ„ì— clipsToBoundsë¥¼ trueë¥¼ ì„¤ì •í•œ ImageViewë¥¼ ë®ì–´ì”Œìš°ëŠ” í˜•íƒœë¡œ í•´ê²°

~~~swift
private lazy var thumnailImageViewShadowView: UIView = {
    let view = UIView()
    shadowOffset = CGSize(width: 1, height: 1)
    shadowOpacity = 0.5
    shadowColor = UIColor.gray.cgColor
    return view
}()

private lazy var thumnailImageView: UIImageView = {
    let imageView = UIImageView()
    imageView.contentMode = .scaleToFill
    imageView.layer.cornerRadius = 16.0
    imageView.clipsToBounds = true

    return imageView
}()
~~~
~~~swift
thumnailImageViewShadowView.addSubview(thumnailImageView)

thumnailImageViewShadowView.snp.makeConstraints { make in
    make.top.equalToSuperview()
    make.leading.equalToSuperview()
    make.trailing.equalToSuperview()
}

thumnailImageView.snp.makeConstraints { make in
    make.edges.equalToSuperview()
}
~~~

## ğŸ“ íšŒê³ 
- `CompositionalLayout`ë¥¼ ì ìš©í•˜ì—¬ ë ˆì´ì•„ì›ƒ ìš”ì†Œë“¤ì˜ ëª¨ë“ˆí™”, ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒì„ ê²½í—˜
- `DiffableDataSource`ë¥¼ ì ìš©í•˜ì—¬ indexPathë¥¼ ì‹ ê²½ì“°ì§€ ì•Šê³  ì‹ë³„ìë¥¼ í†µí•´ ì¶”ê°€, ì‚­ì œ, ì´ë™ ë“±ì˜ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ ì• ë‹ˆë©”ì´ì…˜ì„ ì²˜ë¦¬ë¥¼ ê²½í—˜
- `MVP íŒ¨í„´`ì„ ë„ì…í•˜ì—¬ viewì™€ presenter ê°„ì— ì½”ë“œ ë¶„ë¦¬, presenterì™€ protocolì„ ì´ìš©í•´ì„œ í¸ë¦¬í•œ `Unit Test`ë¥¼ ê²½í—˜
- `BDD` ê¸°ë°˜ì˜ `Unit Test`ë¥¼ ê²½í—˜
